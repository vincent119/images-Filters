# Troubleshooting Guide

[繁體中文](TW/troubleshooting.md)

## Common Issues

### 1. "Signature Mismatch" Error

**Symptom**: API returns `400 Bad Request` with `invalid_signature`.
**Cause**:

- The `SECURITY_KEY` on server differs from the one used to sign.
- The URL path generated by signer doesn't exactly match the requested path.
**Solution**:
- Check environment variables.
- Use the CLI signer tool to verify.

### 2. "Image Not Found" Error

**Symptom**: `404 Not Found`.
**Cause**:

- The generic `http` loader failed to fetch the image from source.
- Local file does not exist.
**Solution**:
- Check server logs for specific upstream error (e.g., DNS error, 403 Forbidden from source).

### 3. High Latency / Slow Processing

**Symptom**: Response time > 1s.
**Cause**:

- Processing large images (CPU bound).
- Fetching large images from slow source (Network bound).
- Cache misses.
**Solution**:
- Enable Redis cache.
- Check Prometheus metrics `imgfilter_processing_duration_seconds`.
- Resize source images closer to target size if possible.

### Debugging Mode

Set `LOG_LEVEL=debug` to see detailed request flow and processing steps.

```bash
export LOG_LEVEL=debug
./images-filters
```
